## Общие сведения

Метка, в действительности, представляет из себя имя, указывающее на адрес в памяти.
Например:

```x86
value:
	.quad 42
	.text
code:
	movq %RDI, %RAX
	addq value, %RAX
	retq
```

В данном коде представлены 2 метки. 
Первая метка value, указывает на адрес памяти в котором хранится восьмибайтное значение 42.
Вторая метка code указывает на исполняемый код.

## Инструкции перехода

Инструкции перехода используют регистр <font color="#ff0000">меняют значение </font><font color="#ff0000">регистра RIP</font>(register instruction pointer) для того, чтобы процессор понимал, какую команду необходимо выполнять следующей.
<font color="#ffff00">Для того, чтобы перемещаться </font>по меткам используются следующие инструкции перехода:
1. `jmp <label>` - в данной инструкции выполнение программы перейдет к метке `<label>`;
2. `call <label>` - в данной инструкции будет выполнен вызов функции `call`;
3. `retq` - будет выполнен выход из функции.
### Инструкция call и retq

Инструкция `call` <font color="#ffff00">вызывает функцию, которая находится по адресу метки</font>. Соответственно она также сохраняет адрес следующей инструкции, которая должна быть выполнена после того, как будет выполнен возврат из функции.
Например:

```x86
main:
	movq $42, %RSI # Присваиваем значение 42 регистру RSI
	call add42 # Вызываем функцию add42, которая добавляет в регистр RSP адрес следующей строки, которая здесь является команда retq
	retq # Выход из функции

add42:
	addq %RSI, %RAX # Производим сложение
	retq # Выходим из функции, переходим по адресу RSP
```

![[Pasted image 20250527123735.png]]

#operational_systems #marks #assembler 